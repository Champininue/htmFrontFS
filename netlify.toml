[build]
  # Build command to inject environment variables
  command = "node build/inject-env.js"
  # Use public directory as expected by Netlify
  publish = "public"

[build.environment]
  # Node version (if needed for any tools)
  NODE_VERSION = "18"
  # Disable secrets scanning for environment variable injection
  SECRETS_SCAN_ENABLED = "false"

# Redirect rules (optional)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Headers for security and performance
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    
# Cache static assets
[[headers]]
  for = "*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000"
    
[[headers]]
  for = "*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

# Form handling (if you want Netlify forms as backup)
# [build]
#   command = ""
#   functions = "netlify/functions"

# ==================================================
# ENVIRONMENT VARIABLES SETUP
# ==================================================
# Set these in your Netlify dashboard:
# Site Settings > Environment Variables
#
# Required:
# - BREVO_API_KEY: Your Brevo API key from https://app.brevo.com/settings/keys/api
# - TO_EMAIL: Your email address where you want to receive messages
#
# Optional:
# - FROM_EMAIL: Sender email (defaults to noreply@ship.brevo.com)
# - RECAPTCHA_SITE_KEY: Your reCAPTCHA site key (optional)
#
# The plugin will automatically inject these into your HTML during build